<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <!-- Extend receipt to show eTIMS information -->
    <t t-name="l10n_ke_etims_pos.EtimsReceiptInfo" owl="1">
        <t t-if="receipt.etims_submitted">
            <div class="etims-info" style="text-align: center; margin-top: 10px; border-top: 1px dashed #000; padding-top: 10px;">
                <div style="font-weight: bold;">KRA eTIMS</div>
                <div t-if="receipt.etims_scu_no">
                    SCU: <t t-esc="receipt.etims_scu_no"/>
                </div>
                <div t-if="receipt.etims_rcpt_no">
                    Receipt #: <t t-esc="receipt.etims_rcpt_no"/>
                </div>
            </div>
        </t>
    </t>

    <!-- Extend OrderReceipt to include eTIMS info -->
    <t t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('pos-receipt')]" position="inside">
            <t t-call="l10n_ke_etims_pos.EtimsReceiptInfo">
                <t t-set="receipt" t-value="props.data"/>
            </t>
        </xpath>
    </t>

    <!-- Refund reason selector for return orders -->
    <t t-name="l10n_ke_etims_pos.RefundReasonSelector" owl="1">
        <div class="etims-refund-reason" t-if="isReturnOrder">
            <label for="etims_refund_reason">Refund Reason (eTIMS):</label>
            <select id="etims_refund_reason"
                    t-on-change="onRefundReasonChange"
                    class="form-select">
                <option value="01">Damage/Defect</option>
                <option value="02">Change of Mind</option>
                <option value="03">Wrong Item Delivered</option>
                <option value="04">Late Delivery</option>
                <option value="05">Duplicate Order</option>
                <option value="06">Price Dispute</option>
                <option value="07">Quantity Dispute</option>
                <option value="08">Quality Issues</option>
                <option value="09">Order Cancellation</option>
                <option value="10">Other</option>
            </select>
        </div>
    </t>

</templates>
