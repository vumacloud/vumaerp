[options]
addons_path = /mnt/extra-addons
data_dir = /var/lib/odoo

; ===========================================
; DATABASE - Read from environment variables
; ===========================================
; DB settings come from Docker environment:
;   HOST, PORT, USER, PASSWORD
db_sslmode = require
db_maxconn = 32

; ===========================================
; SECURITY
; ===========================================
; admin_passwd is set via ODOO_ADMIN_PASSWD env var

; ===========================================
; PERFORMANCE (Optimized for 16GB RAM / 4 vCPU)
; ===========================================
; Workers: (2 * CPU) + 1 = 9, but 6-8 is safer with cron
workers = 6

; Memory per worker: ~2GB soft, ~2.5GB hard
limit_memory_soft = 2147483648
limit_memory_hard = 2684354560

; Request limits
limit_request = 8192
limit_time_cpu = 120
limit_time_real = 300

; Cron workers (separate from main workers)
max_cron_threads = 2

; ===========================================
; PROXY & LOGGING
; ===========================================
proxy_mode = True
logfile = None
log_level = warn

; ===========================================
; MULTI-TENANCY CONFIGURATION
; ===========================================
dbfilter = ^%d$
list_db = False

; ===========================================
; PERFORMANCE TUNING
; ===========================================
; Disable unnecessary features for speed
osv_memory_age_limit = 1.0
osv_memory_count_limit = False
