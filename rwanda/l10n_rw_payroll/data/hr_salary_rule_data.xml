<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="0">
        <!-- ============================================ -->
        <!-- BASIC SALARY -->
        <!-- ============================================ -->
        <record id="rule_rw_basic" model="hr.salary.rule">
            <field name="name">Basic Salary</field>
            <field name="code">BASIC</field>
            <field name="category_id" ref="om_hr_payroll.BASIC"/>
            <field name="sequence">1</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.wage</field>
        </record>

        <!-- ============================================ -->
        <!-- ALLOWANCES -->
        <!-- ============================================ -->
        <record id="rule_rw_housing" model="hr.salary.rule">
            <field name="name">Housing Allowance</field>
            <field name="code">HOUSE</field>
            <field name="category_id" ref="category_rw_allowance"/>
            <field name="sequence">10</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.housing_allowance or 0</field>
        </record>

        <record id="rule_rw_transport" model="hr.salary.rule">
            <field name="name">Transport Allowance</field>
            <field name="code">TRANS</field>
            <field name="category_id" ref="category_rw_allowance"/>
            <field name="sequence">11</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.transport_allowance or 0</field>
        </record>

        <record id="rule_rw_responsibility" model="hr.salary.rule">
            <field name="name">Responsibility Allowance</field>
            <field name="code">RESP</field>
            <field name="category_id" ref="category_rw_allowance"/>
            <field name="sequence">12</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.responsibility_allowance or 0</field>
        </record>

        <record id="rule_rw_communication" model="hr.salary.rule">
            <field name="name">Communication Allowance</field>
            <field name="code">COMM</field>
            <field name="category_id" ref="category_rw_allowance"/>
            <field name="sequence">13</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.communication_allowance or 0</field>
        </record>

        <record id="rule_rw_other_allowances" model="hr.salary.rule">
            <field name="name">Other Allowances</field>
            <field name="code">OTHALW</field>
            <field name="category_id" ref="category_rw_allowance"/>
            <field name="sequence">14</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">result = contract.other_allowances or 0</field>
        </record>

        <!-- ============================================ -->
        <!-- GROSS SALARY -->
        <!-- ============================================ -->
        <record id="rule_rw_gross" model="hr.salary.rule">
            <field name="name">Gross Salary</field>
            <field name="code">GROSS</field>
            <field name="category_id" ref="om_hr_payroll.GROSS"/>
            <field name="sequence">50</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result = categories.BASIC + categories.RW_ALW
            </field>
        </record>

        <!-- ============================================ -->
        <!-- STATUTORY DEDUCTIONS -->
        <!-- ============================================ -->

        <!-- RSSB Employee Pension - 3% -->
        <record id="rule_rw_rssb_pension_ee" model="hr.salary.rule">
            <field name="name">RSSB Pension (Employee 3%)</field>
            <field name="code">RSSB_EE</field>
            <field name="category_id" ref="category_rw_statutory"/>
            <field name="sequence">100</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
# Employee pension contribution: 3% of gross
if contract.rw_rssb_exempt:
    result = 0
else:
    result = -categories.GROSS * 0.03
            </field>
        </record>

        <!-- PAYE - Progressive rates -->
        <record id="rule_rw_paye" model="hr.salary.rule">
            <field name="name">PAYE (Pay As You Earn)</field>
            <field name="code">PAYE</field>
            <field name="category_id" ref="category_rw_statutory"/>
            <field name="sequence">110</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
# Rwanda PAYE rates (monthly):
# 0% for income up to RWF 30,000
# 20% for income RWF 30,001 - 100,000
# 30% for income above RWF 100,000

if contract.rw_tax_exempt:
    result = 0
else:
    gross = categories.GROSS
    if gross &lt;= 30000:
        paye = 0
    elif gross &lt;= 100000:
        paye = (gross - 30000) * 0.20
    else:
        paye = 14000 + (gross - 100000) * 0.30
    result = -paye
            </field>
        </record>

        <!-- ============================================ -->
        <!-- EMPLOYER CONTRIBUTIONS (not deducted from employee) -->
        <!-- ============================================ -->

        <!-- RSSB Employer Pension - 3% -->
        <record id="rule_rw_rssb_pension_er" model="hr.salary.rule">
            <field name="name">RSSB Pension (Employer 3%)</field>
            <field name="code">RSSB_ER_PEN</field>
            <field name="category_id" ref="category_rw_employer"/>
            <field name="sequence">200</field>
            <field name="appears_on_payslip" eval="True"/>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
# Employer pension contribution: 3% of gross
if contract.rw_rssb_exempt:
    result = 0
else:
    result = categories.GROSS * 0.03
            </field>
        </record>

        <!-- RSSB Maternity Leave - 0.3% -->
        <record id="rule_rw_rssb_maternity" model="hr.salary.rule">
            <field name="name">RSSB Maternity (Employer 0.3%)</field>
            <field name="code">RSSB_ER_MAT</field>
            <field name="category_id" ref="category_rw_employer"/>
            <field name="sequence">201</field>
            <field name="appears_on_payslip" eval="True"/>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
# Employer maternity contribution: 0.3% of gross
if contract.rw_rssb_exempt:
    result = 0
else:
    result = categories.GROSS * 0.003
            </field>
        </record>

        <!-- RSSB Occupational Hazards - 2% -->
        <record id="rule_rw_rssb_hazards" model="hr.salary.rule">
            <field name="name">RSSB Occupational Hazards (Employer 2%)</field>
            <field name="code">RSSB_ER_HAZ</field>
            <field name="category_id" ref="category_rw_employer"/>
            <field name="sequence">202</field>
            <field name="appears_on_payslip" eval="True"/>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
# Employer occupational hazards contribution: 2% of gross
if contract.rw_rssb_exempt:
    result = 0
else:
    result = categories.GROSS * 0.02
            </field>
        </record>

        <!-- Total Employer RSSB -->
        <record id="rule_rw_rssb_employer_total" model="hr.salary.rule">
            <field name="name">Total RSSB (Employer 5.3%)</field>
            <field name="code">RSSB_ER</field>
            <field name="category_id" ref="category_rw_employer"/>
            <field name="sequence">210</field>
            <field name="appears_on_payslip" eval="True"/>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
# Total employer RSSB: 3% + 0.3% + 2% = 5.3%
if contract.rw_rssb_exempt:
    result = 0
else:
    result = categories.GROSS * 0.053
            </field>
        </record>

        <!-- ============================================ -->
        <!-- NET SALARY -->
        <!-- ============================================ -->
        <record id="rule_rw_net" model="hr.salary.rule">
            <field name="name">Net Salary</field>
            <field name="code">NET</field>
            <field name="category_id" ref="om_hr_payroll.NET"/>
            <field name="sequence">999</field>
            <field name="amount_select">code</field>
            <field name="amount_python_compute">
result = categories.GROSS + categories.RW_STAT
            </field>
        </record>
    </data>
</odoo>
